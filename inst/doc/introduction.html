<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Introducing kfigr</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<h1>Introducing kfigr</h1>

<h2> a streamlined, knitr-integrated cross-referencing system for HTML documents</h2>

<h3>What does it do?</h3>

<p><code>kfigr</code> provides cross-referencing functionality for Rmarkdown documents by creating HTML anchor tags for code chunks. <code>kfigr</code> is designed to provide a simple and flexible indexing system integrated seamlessly with <code>knitr</code>.</p>

<h3>How does it work?</h3>

<p><code>kfigr</code> provides just one function and one hook (code chunk option) to anchor a chunk. Any chunk can be anchored regardless of the output. Chunk labels are used for indexing, so there is no way to get confused about what you are referencing. Defining anchors as a chunk option forces users to write distinct chunks for any referenced output, which improves readability of the source document. Users have complete flexibility to define numbering groups for distinguishing between e.g. figures and tables. </p>

<p><code>kfigr</code> defines a custom hook, <code>anchor</code>, which is used to decide how to track the chunk. We use this hook to define a &ldquo;type&rdquo; for the chunk. For instance, if I create a plot and want to refer it later I can pass the chunk option <code>anchor=&quot;figure&quot;</code>. <code>kfigr</code> uses the chunk label to generate an HTML anchor tag above the chunk and assigns a number to the chunk based on its type. As an example, consider the following chunk. </p>

<p><a name="first-chunk"></a></p>

<pre><code class="r">require(ggplot2)
qplot(rnorm(100), geom=&quot;histogram&quot;)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk first-chunk"/> </p>

<p>I named the chunk &ldquo;first-chunk&rdquo; and used the chunk option <code>anchor=&quot;figure&quot;</code>. Now, I will use the function <code>figr(&#39;first-chunk&#39;)</code> in an inline chunk to reference the chunk here: <a href="#first-chunk">1</a>. The <code>figr</code> function returns the number of the referenced chunk as a markdown link, e.g. <code>[1](#first-chunk)</code>. <code>kfigr</code> keeps track of reference numbers by tracking the chunk placement sequence separately for each &ldquo;type&rdquo;.  Note that the value of the <code>anchor</code> option is case sensitive, so &ldquo;Figure&rdquo; is different from &ldquo;figure&rdquo;.</p>

<p>If you need to, you can reference a chunk before you define it. You must specify the &ldquo;type&rdquo; when referencing a later chunk, and it is up to you to ensure every chunk you reference is defined. Furthermore, if you want to refer to e.g. the sixth &ldquo;figure&rdquo; chunk, you must first reference chunks 1-5 of type &ldquo;figure&rdquo;. This can be done inline using <code>invisible(figr(...))</code>. This limitation is due to the way markdown documents are rendered; if you need smarter referencing capabilities, consider using LaTeX (Rnw) instead of markdown (Rmd).</p>

<p>You can pass <code>prefix=TRUE</code> or change the <a href="#setting-global-options">global options</a> to get a full label, e.g. <a href="#second-chunk">figure 2</a>.</p>

<p><a name="second-chunk"></a></p>

<pre><code class="r">qplot(runif(100), geom=&quot;density&quot;)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk second-chunk"/> </p>

<p>You can reference any kind of chunk output, and specify any &ldquo;type&rdquo; of chunk. For example, look at <a href="#third-chunk">table 1</a>:</p>

<p><a name="third-chunk"></a></p>

<pre><code class="r">kable(head(iris, 6))
</code></pre>

<table><thead>
<tr>
<th align="right">Sepal.Length</th>
<th align="right">Sepal.Width</th>
<th align="right">Petal.Length</th>
<th align="right">Petal.Width</th>
<th align="left">Species</th>
</tr>
</thead><tbody>
<tr>
<td align="right">5.1</td>
<td align="right">3.5</td>
<td align="right">1.4</td>
<td align="right">0.2</td>
<td align="left">setosa</td>
</tr>
<tr>
<td align="right">4.9</td>
<td align="right">3.0</td>
<td align="right">1.4</td>
<td align="right">0.2</td>
<td align="left">setosa</td>
</tr>
<tr>
<td align="right">4.7</td>
<td align="right">3.2</td>
<td align="right">1.3</td>
<td align="right">0.2</td>
<td align="left">setosa</td>
</tr>
<tr>
<td align="right">4.6</td>
<td align="right">3.1</td>
<td align="right">1.5</td>
<td align="right">0.2</td>
<td align="left">setosa</td>
</tr>
<tr>
<td align="right">5.0</td>
<td align="right">3.6</td>
<td align="right">1.4</td>
<td align="right">0.2</td>
<td align="left">setosa</td>
</tr>
<tr>
<td align="right">5.4</td>
<td align="right">3.9</td>
<td align="right">1.7</td>
<td align="right">0.4</td>
<td align="left">setosa</td>
</tr>
</tbody></table>

<p>Anchoring even works for chunks that use the <code>ref.label</code> option. For instance, consider the following code:</p>

<pre><code class="r">x = 1:20
y = x + rnorm(20)
lm(y~x)
</code></pre>

<p>I have not anchored the above chunk and the code was not evaluated because I used the chunk option <code>eval=FALSE</code>. If I had used <code>echo=FALSE</code> you would have no idea that the chunk even existed! But I can reproduce the chunk by creating an empty chunk with the same name (see the <code>knitr</code> documentation for more details) and anchor the empty chunk, as shown in <a href="#fourth-chunk">block 1</a>. </p>

<p><a name="fourth-chunk"></a></p>

<pre><code class="r">x = 1:20
y = x + rnorm(20)
lm(y~x)
</code></pre>

<pre><code>## 
## Call:
## lm(formula = y ~ x)
## 
## Coefficients:
## (Intercept)            x  
##    -0.05193      0.98316
</code></pre>

<p>If you want to reference both the code and the output of a chunk separately you can use the chunk option <code>ref.label</code> and specify an anchor for each referring chunk. Below, I create a hidden chunk and reference it using eval=FALSE to produce the code block. I then reference the hidden chunk a second time using echo=FALSE to produce only the output. </p>

<p><a name="fifth-code"></a></p>

<pre><code class="r">df &lt;- data.frame(x=x, y=y)
ggplot(df, aes(x=x, y=y)) + geom_smooth(method=&quot;lm&quot;) + 
geom_point(pch=21, color=&quot;black&quot;, fill=&quot;red&quot;)
</code></pre>

<p><a name="fifth-plot"></a><img src="data:image/png;base64,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" alt="plot of chunk fifth-plot"/> </p>

<p>You can verify that <a href="#fifth-code">block 2</a> and <a href="#fifth-plot">figure 3</a> are distinct.</p>

<p><code>kfigr</code> tracks references internally. If you want to get a list of indexed chunks, you can use <code>anchors()</code> to return a structure that lists the labels by type, a reference history, and an index, as shown in <a href="#last-chunk">block 3</a>. The <code>history</code> attribute can be helpful for troubleshooting problems with document references.</p>

<p><a name="last-chunk"></a></p>

<pre><code class="r">anchors(&quot;index&quot;)
</code></pre>

<pre><code>##          label   type number
## 1  first-chunk figure      1
## 2 second-chunk figure      2
## 3  third-chunk  table      1
## 4 fourth-chunk  block      1
## 5   fifth-code  block      2
## 6   fifth-plot figure      3
## 7   last-chunk  block      3
</code></pre>

<pre><code class="r">anchors(&quot;history&quot;)
</code></pre>

<pre><code>##           label   type number referenced.by
## 1   first-chunk figure      1   hook_anchor
## 2   first-chunk figure      1          figr
## 3  second-chunk figure      2          figr
## 4  second-chunk figure      2   hook_anchor
## 5   third-chunk  table      1          figr
## 6   third-chunk  table      1   hook_anchor
## 7  fourth-chunk  block      1          figr
## 8  fourth-chunk  block      1   hook_anchor
## 9    fifth-code  block      2   hook_anchor
## 10   fifth-plot figure      3   hook_anchor
## 11   fifth-code  block      2          figr
## 12   fifth-plot figure      3          figr
## 13   last-chunk  block      3          figr
## 14   last-chunk  block      3   hook_anchor
</code></pre>

<p><a name="setting-global-options"></a></p>

<h3>Setting global options</h3>

<p><code>kfigr</code> uses <code>knitr</code> options to maintain global default settings. <code>kfigr</code> option names are identified by the prefix &ldquo;kfigr&rdquo;. Two options are available: <code>kfigr.link</code> to display a link to the anchor in citations; and <code>kfigr.prefix</code> to include the prefix when referencing. These options can be changed using <code>opts_knit$get</code> and <code>opts_knit$set</code>. Any global options set within a chunk will not be available in that particular chunk (see the <code>knitr</code> documentation for more details). </p>

<h3>A note on tangling</h3>

<p>An important limitation of <code>tangle</code> is that inline code chunks are not evaluated. Under most circumstances the tangled code should produce the same reference numbers as the knitted document, but discrepancies will appear if you have forgotten to invisibly reference intermediate chunks, or have anchored chunks in a different order than referenced. </p>

<h3>Still confused?</h3>

<p>Take a look at the .Rmd source file for this vignette and all should become clear.</p>

</body>

</html>
